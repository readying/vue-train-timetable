{"version":3,"file":"vue-train-timetable.min.js","sources":["../src/vue-train-timetable.vue"],"sourcesContent":["<template>\n  <div :class='\"__vue-train-timetbale \" + directionClass'>\n    <ul :style='directionStyle' :class='\"timetable \" + directionClass' ref=\"timetable\">\n      <li v-for='stop, index in displayList' class='stop-item'>\n        <i :class='\"stop-bar \" + appendBarClass(stop)' :style='barBackground'>\n          <i class='start-point' :style='barBackground' v-if='is_start(stop)'></i>\n          <i class='end-point' :style='barBackground' v-else-if='is_end(stop)'></i>\n          <i class='stop-bar pointing' :style='barBackground' v-else></i>\n        </i>\n        <span :style='{color: text_color}' class='stop-text'>\n          {{stop.name}}\n          <i :class='stop.icon' v-if='stop.icon'></i>\n        </span>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"vue-train-timetable\",\n  props: {\n    timetable: {\n      type: Array,\n      default: [],\n      required: true\n    },\n    position: {\n      type: Number,\n      default: 0,\n      required: false\n    },\n    maximum_display: {\n      type: Number,\n      default: 10,\n      required: false\n    },\n    minimum_display: {\n      type: Number,\n      default: 5,\n      required: false\n    },\n    display_start: {\n      type: Boolean,\n      default: true,\n      required: false\n    },\n    display_end: {\n      type: Boolean,\n      default: true,\n      required: false\n    },\n    bar_color: {\n      type: String,\n      default: \"rgb(235, 247, 149)\",\n      required: false\n    },\n    text_color: {\n      type: String,\n      default: \"white\",\n      required: false\n    },\n    direction: {\n      type: String,\n      default: \"vertical\",\n      required: false\n    }\n  },\n\n  data() {\n    return {};\n  },\n\n  watch: {},\n\n  computed: {\n    directionStyle() {\n      let timetableEl = this.$refs.timetable;\n      const result =\n        this.direction == \"vertical\"\n          ? {}\n          : {\n              width: this.displayList.length * 25 + \"px\"\n            };\n      return result;\n    },\n    directionClass() {\n      return this.direction == \"vertical\" ? \"vertical\" : \"horizontal\";\n    },\n    barBackground() {\n      return {\n        \"background-color\": this.bar_color\n      };\n    },\n    displayList() {\n      let position = parseInt(this.position, 10);\n      let size = this.timetable.length;\n      let start = position;\n      let end = position + this.maximum_display;\n      if (end >= size) end = size;\n      console.log(end - start, this.minimum_display);\n      if (end - start < this.minimum_display) {\n        start = end - this.minimum_display;\n        if (start < 0) start = 0;\n      }\n      return this.timetable.slice(start, end);\n    }\n  },\n  methods: {\n    is_end(data) {\n      return (\n        this.display_end &&\n        this.timetable.indexOf(data) == this.timetable.length - 1\n      );\n    },\n    is_start(data) {\n      return this.display_start && this.timetable.indexOf(data) == 0;\n    },\n    appendBarClass(data) {\n      let list = this.displayList;\n      let index = list.indexOf(data);\n      if (index == list.length - 1) {\n        return \"end\";\n      } else if (index == 0) {\n        return \"start\";\n      }\n      return \"\";\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@point_size: 12px;\n@bar_width: 15px;\n@bar_text_padding: 20px;\n@item_height: 25px;\n.__vue-train-timetbale {\n  font-family: helvetica, sans-serif;\n  position: relative;\n  font-weight: 500;\n  box-sizing: border-box;\n  ul {\n    li {\n      list-style: none;\n    }\n  }\n  &.horizontal {\n    // overflow-x: hidden;\n  }\n  .start-point,\n  .end-point {\n    width: @point_size;\n    height: @point_size;\n    border-radius: @point_size;\n    position: absolute;\n    left: 0;\n    margin-left: -@point_size / 4;\n  }\n  .start-point {\n    top: -@point_size / 2;\n  }\n  .end-point {\n    bottom: -@point_size / 2;\n  }\n  .stop-item {\n    padding: 5px 0 5px @bar_text_padding;\n    box-sizing: border-box;\n    position: relative;\n    height: @item_height;\n  }\n  .stop-bar {\n    position: absolute;\n  }\n  .timetable {\n    &.horizontal {\n      .start-point {\n        top: -4px;\n      }\n      .stop-bar {\n        width: 100%;\n        height: 4px;\n        top: 4px;\n        left: 0;\n        &.pointing {\n          top: 0;\n          width: 4px;\n          height: 10px;\n          position: absolute;\n          left: 0;\n        }\n      }\n      .stop-item {\n        float: left;\n        position: relative;\n        width: @item_height;\n        height: auto;\n      }\n      .stop-text {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        transform: rotateZ(90deg) translateX(2px);\n        transform-origin: 0;\n        height: 20px;\n        width: 100%;\n        min-width: 120px;\n      }\n    }\n\n    &.vertical {\n      .stop-bar {\n        width: 5px;\n        height: 100%;\n        top: 0;\n        left: 0;\n        &.start {\n          top: 50%;\n          height: 50%;\n          .pointing {\n            top: 0;\n          }\n        }\n        &.end {\n          bottom: 50%;\n          height: 50%;\n          .pointing {\n            top: 100%;\n          }\n        }\n        &.pointing {\n          height: 4px;\n          width: @bar_width;\n          top: 50%;\n          left: 0;\n          margin-top: -2px;\n          // transform: translateX(50%);\n        }\n      }\n    }\n  }\n}\n.stop-text {\n  font-size: 14px;\n}\n</style>\n"],"names":[],"mappings":";;;;;oMAmBA"}